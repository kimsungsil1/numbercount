<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>숫자 음성 카운터</title>
    <style>
        /* 모바일 친화적인 디자인을 위한 CSS */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1 {
            text-align: center;
        }
        .container {
            max-width: 500px;
            margin: auto;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        #controls {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        #controls button {
            width: 48%;
            margin-top: 10px;
        }
        #counter {
            text-align: center;
            font-size: 2em;
            margin-top: 20px;
        }
        #textCounter {
            text-align: center;
            font-size: 1.5em;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>숫자 음성 카운터</h1>

        <!-- 기능 1: 숫자 범위 설정 -->
        <label for="startNumber">시작 숫자:</label>
        <input type="number" id="startNumber" value="1" min="1">

        <label for="endNumber">끝 숫자:</label>
        <input type="number" id="endNumber" value="100" min="1">

        <!-- 기능 2: 음성 속도 및 음량 조절 -->
        <label for="rate">음성 속도:</label>
        <input type="range" id="rate" min="0.5" max="2" value="1" step="0.1">
        <span id="rateValue">1</span>

        <label for="volume">음량:</label>
        <input type="range" id="volume" min="0" max="1" value="1" step="0.1">
        <span id="volumeValue">1</span>

        <!-- 기능 4: 숫자 표기 방식 선택 -->
        <label for="numberFormat">숫자 표기 방식:</label>
        <select id="numberFormat">
            <option value="digit">숫자 그대로</option>
            <option value="word">숫자 단어로</option>
        </select>

        <!-- 기능 6: 음성 선택 기능 -->
        <label for="voiceSelect">음성 선택:</label>
        <select id="voiceSelect"></select>

        <!-- 기능 3: 일시 정지 및 재개 기능 -->
        <div id="controls">
            <button id="startBtn">시작</button>
            <button id="pauseBtn">일시 정지</button>
            <button id="resumeBtn">재개</button>
            <button id="stopBtn">중지</button>
        </div>

        <!-- 숫자 표시 -->
        <div id="counter">0</div>
        <!-- 기능 5: 숫자를 문자로 변환하여 표시 -->
        <div id="textCounter"></div>
    </div>

    <script>
        let currentNumber = 1;
        let counting = false;
        let paused = false;
        let voices = [];
        const counterDisplay = document.getElementById("counter");
        const textCounterDisplay = document.getElementById("textCounter");
        const startNumberInput = document.getElementById("startNumber");
        const endNumberInput = document.getElementById("endNumber");
        const rateInput = document.getElementById("rate");
        const rateValue = document.getElementById("rateValue");
        const volumeInput = document.getElementById("volume");
        const volumeValue = document.getElementById("volumeValue");
        const numberFormatSelect = document.getElementById("numberFormat");
        const voiceSelect = document.getElementById("voiceSelect");

        // 기능 6: 음성 선택 기능 구현
        function populateVoiceList() {
            voices = window.speechSynthesis.getVoices();
            voiceSelect.innerHTML = '';
            voices.forEach((voice) => {
                const option = document.createElement('option');
                option.textContent = voice.name + ' (' + voice.lang + ')';
                option.value = voice.name;
                voiceSelect.appendChild(option);
            });
        }

        populateVoiceList();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }

        // 음성 속도 및 음량 값 표시 업데이트
        rateInput.addEventListener('input', () => {
            rateValue.textContent = rateInput.value;
        });
        volumeInput.addEventListener('input', () => {
            volumeValue.textContent = volumeInput.value;
        });

        // 숫자를 문자로 변환하는 함수들 (기능 5 및 8)

        // 한국어 숫자 변환 함수
        function numberToKorean(number) {
            const units = ['', '만', '억', '조', '경'];
            const digits = ['', '일', '이', '삼', '사', '오', '육', '칠', '팔', '구'];
            const positions = ['', '십', '백', '천'];

            let result = '';
            let unitIndex = 0;

            while (number > 0) {
                let part = number % 10000;
                number = Math.floor(number / 10000);

                let partResult = '';
                let positionIndex = 0;

                while (part > 0) {
                    let digit = part % 10;
                    if (digit > 0) {
                        let digitText = digits[digit];
                        let positionText = positions[positionIndex];
                        if (positionIndex === 0 && digit === 1 && partResult !== '') {
                            digitText = '';
                        }
                        partResult = digitText + positionText + partResult;
                    }
                    part = Math.floor(part / 10);
                    positionIndex++;
                }

                if (partResult !== '') {
                    partResult += units[unitIndex];
                }
                result = partResult + result;
                unitIndex++;
            }

            if (result === '') {
                result = '영';
            }
            return result;
        }

        // 영어 숫자 변환 함수
        function numberToEnglish(number) {
            const a = [
                '', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight',
                'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen',
                'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'
            ];
            const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
            if (number < 20) return a[number];
            if (number < 100) return b[Math.floor(number / 10)] + (number % 10 ? '-' + a[number % 10] : '');
            if (number < 1000) return a[Math.floor(number / 100)] + ' hundred' + (number % 100 ? ' ' + numberToEnglish(number % 100) : '');
            if (number < 1000000) return numberToEnglish(Math.floor(number / 1000)) + ' thousand' + (number % 1000 ? ' ' + numberToEnglish(number % 1000) : '');
            return number.toString();
        }

        // 스페인어 숫자 변환 함수
        function numberToSpanish(number) {
            const units = ['', 'uno', 'dos', 'tres', 'cuatro', 'cinco', 'seis', 'siete', 'ocho', 'nueve'];
            const tens = ['', '', 'veinte', 'treinta', 'cuarenta', 'cincuenta', 'sesenta', 'setenta', 'ochenta', 'noventa'];
            const teens = ['diez', 'once', 'doce', 'trece', 'catorce', 'quince', 'dieciséis', 'diecisiete', 'dieciocho', 'diecinueve'];
            const hundreds = ['', 'cien', 'doscientos', 'trescientos', 'cuatrocientos', 'quinientos', 'seiscientos', 'setecientos', 'ochocientos', 'novecientos'];

            if (number === 0) return 'cero';
            if (number < 10) return units[number];
            if (number < 20) return teens[number - 10];
            if (number < 100) return tens[Math.floor(number / 10)] + (number % 10 ? ' y ' + units[number % 10] : '');
            if (number < 1000) return hundreds[Math.floor(number / 100)] + (number % 100 ? ' ' + numberToSpanish(number % 100) : '');
            if (number < 1000000) return numberToSpanish(Math.floor(number / 1000)) + ' mil' + (number % 1000 ? ' ' + numberToSpanish(number % 1000) : '');
            return number.toString();
        }

        // 프랑스어 숫자 변환 함수
        function numberToFrench(number) {
            const units = ['', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf'];
            const tens = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante'];
            const teens = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize'];
            
            if (number === 0) return 'zéro';
            if (number < 10) return units[number];
            if (number < 17) return teens[number - 10];
            if (number < 20) return 'dix-' + units[number - 10];
            if (number < 70) {
                let ten = tens[Math.floor(number / 10)];
                let unit = number % 10;
                return ten + (unit ? (unit === 1 ? ' et un' : '-' + units[unit]) : '');
            }
            if (number < 80) {
                let unit = number % 20;
                return 'soixante-' + (unit ? numberToFrench(unit) : 'dix');
            }
            if (number < 100) {
                let unit = number % 20;
                return 'quatre-vingt' + (unit ? '-' + numberToFrench(unit) : '');
            }
            if (number < 1000) {
                let hundred = Math.floor(number / 100);
                let rest = number % 100;
                return (hundred > 1 ? units[hundred] + ' cent' : 'cent') + (rest ? ' ' + numberToFrench(rest) : '');
            }
            if (number < 1000000) {
                let thousand = Math.floor(number / 1000);
                let rest = number % 1000;
                return (thousand > 1 ? numberToFrench(thousand) + ' mille' : 'mille') + (rest ? ' ' + numberToFrench(rest) : '');
            }
            return number.toString();
        }

        // 추가적인 언어의 숫자 변환 함수들을 여기서 정의합니다.

        // 숫자를 읽는 함수
        function speakNumber(number) {
            const utterance = new SpeechSynthesisUtterance();
            const selectedVoiceName = voiceSelect.value;
            utterance.voice = voices.find(voice => voice.name === selectedVoiceName);

            const lang = utterance.voice.lang;
            utterance.lang = lang;

            let textToSpeak = number.toString();
            let displayText = number.toString();

            // 기능 4 및 8: 숫자 표기 방식 및 다국어 숫자 변환
            if (numberFormatSelect.value === "word") {
                if (lang.startsWith('ko')) {
                    textToSpeak = numberToKorean(number);
                    displayText = textToSpeak;
                } else if (lang.startsWith('en')) {
                    textToSpeak = numberToEnglish(number);
                    displayText = textToSpeak;
                } else if (lang.startsWith('es')) {
                    textToSpeak = numberToSpanish(number);
                    displayText = textToSpeak;
                } else if (lang.startsWith('fr')) {
                    textToSpeak = numberToFrench(number);
                    displayText = textToSpeak;
                } else {
                    // 다른 언어의 경우 숫자 그대로 읽음
                    textToSpeak = number.toString();
                }
            }

            utterance.text = textToSpeak;
            utterance.rate = parseFloat(rateInput.value);
            utterance.volume = parseFloat(volumeInput.value);

            // utterance의 onend 이벤트에 다음 숫자를 호출하도록 설정
            utterance.onend = function() {
                if (counting && !paused) {
                    currentNumber++;
                    count();
                }
            };

            window.speechSynthesis.speak(utterance);

            // 기능 5: 숫자를 문자로 변환하여 표시
            counterDisplay.textContent = number;
            textCounterDisplay.textContent = displayText;
        }

        // 카운팅 시작 함수
        function startCounting() {
            if (counting) return;
            currentNumber = parseInt(startNumberInput.value);
            counting = true;
            paused = false;
            count();
        }

        // 카운팅 중지 함수
        function stopCounting() {
            counting = false;
            paused = false;
            window.speechSynthesis.cancel();
        }

        // 일시 정지 함수
        function pauseCounting() {
            if (!counting || paused) return;
            paused = true;
            window.speechSynthesis.pause();
        }

        // 재개 함수
        function resumeCounting() {
            if (!counting || !paused) return;
            paused = false;
            window.speechSynthesis.resume();
        }

        // 카운팅 함수
        function count() {
            if (!counting || paused) return;

            const endNumber = parseInt(endNumberInput.value);
            if (currentNumber > endNumber) {
                counting = false;
                return;
            }

            speakNumber(currentNumber);
        }

        // 이벤트 리스너 등록
        document.getElementById("startBtn").addEventListener("click", startCounting);
        document.getElementById("stopBtn").addEventListener("click", stopCounting);
        document.getElementById("pauseBtn").addEventListener("click", pauseCounting);
        document.getElementById("resumeBtn").addEventListener("click", resumeCounting);
    </script>
</body>
</html>
